<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第8章 私服nexus | 大数据分析、网络爬虫、搜索引擎、高并发网络架构</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="baidu-site-verification" content="rNjOySDcjy" />
  <meta name="description" content="第8章 私服nexus
本章详细介绍了nexus的安装过程，设置maven从私服下载构件，以及发布构件至nexus。

8.1 什么是nexusnexus是一个web版的仓库管理软件
8.2 nexus安装nexus安装非常简单。下载地址：http://www.sonatype.org/nexus/go
本文以Linux环境为例，安装nexus：

首先在/usr/local下建nexus目录
将">
<meta property="og:type" content="article">
<meta property="og:title" content="第8章 私服nexus">
<meta property="og:url" content="http://www.ibofine.com/2015/11/12/chapter8/chapter8/index.html">
<meta property="og:site_name" content="大数据分析、网络爬虫、搜索引擎、高并发网络架构">
<meta property="og:description" content="第8章 私服nexus
本章详细介绍了nexus的安装过程，设置maven从私服下载构件，以及发布构件至nexus。

8.1 什么是nexusnexus是一个web版的仓库管理软件
8.2 nexus安装nexus安装非常简单。下载地址：http://www.sonatype.org/nexus/go
本文以Linux环境为例，安装nexus：

首先在/usr/local下建nexus目录
将">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i3/653726111/TB2wqjlhXXXXXbiXpXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i3/653726111/TB2jzjphXXXXXaWXpXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i2/653726111/TB2LrvLhXXXXXX1XXXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i4/653726111/TB2p5_zhXXXXXbWXXXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i3/653726111/TB23DTMhXXXXXXyXXXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i2/653726111/TB2vnbGhXXXXXacXXXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i4/653726111/TB2cxjHhXXXXXaHXXXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i1/653726111/TB2CvHBhXXXXXchXXXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i3/653726111/TB23S2EhXXXXXa2XXXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i2/653726111/TB2KmYahXXXXXXlXFXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i2/653726111/TB2C0bPhXXXXXXaXXXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i2/653726111/TB2S_YahXXXXXXAXFXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i3/653726111/TB2.abzhXXXXXctXXXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i2/653726111/TB2h3TahXXXXXX4XFXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i1/653726111/TB2MNbChXXXXXblXXXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i4/653726111/TB2gKLEhXXXXXa6XXXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i2/653726111/TB26g2DhXXXXXbFXXXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i2/653726111/TB2g3PxhXXXXXcCXXXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i3/653726111/TB2mYzAhXXXXXbKXXXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i4/653726111/TB2uq_vhXXXXXXeXpXXXXXXXXXX_!!653726111.png">
<meta property="og:image" content="https://img.alicdn.com/imgextra/i1/653726111/TB2C9bxhXXXXXctXXXXXXXXXXXX_!!653726111.png">
<meta property="og:updated_time" content="2015-11-13T05:05:10.058Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第8章 私服nexus">
<meta name="twitter:description" content="第8章 私服nexus
本章详细介绍了nexus的安装过程，设置maven从私服下载构件，以及发布构件至nexus。

8.1 什么是nexusnexus是一个web版的仓库管理软件
8.2 nexus安装nexus安装非常简单。下载地址：http://www.sonatype.org/nexus/go
本文以Linux环境为例，安装nexus：

首先在/usr/local下建nexus目录
将">
  
    <link rel="alternative" href="/atom.xml" title="大数据分析、网络爬虫、搜索引擎、高并发网络架构" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?753ec142a7f771184593565c92157576";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/my.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">JA</a></h1>
		</hgroup>

		
		<p class="header-subtitle">志在，愿即在！</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/mavenbook">maven使用指南</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/ibofine/" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="/weibo.com" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
								<a class="mail" target="_blank" href="/message0203@sina.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/eclipse/" style="font-size: 13.33px;">eclipse</a> <a href="/tags/java/" style="font-size: 16.67px;">java</a> <a href="/tags/jenkins/" style="font-size: 10px;">jenkins</a> <a href="/tags/maven/" style="font-size: 20px;">maven</a> <a href="/tags/nexus/" style="font-size: 10px;">nexus</a> <a href="/tags/pom/" style="font-size: 10px;">pom</a> <a href="/tags/svn/" style="font-size: 10px;">svn</a> <a href="/tags/tomcat/" style="font-size: 10px;">tomcat</a> <a href="/tags/依赖特性/" style="font-size: 10px;">依赖特性</a> <a href="/tags/坐标/" style="font-size: 10px;">坐标</a> <a href="/tags/持续集成/" style="font-size: 10px;">持续集成</a> <a href="/tags/私服/" style="font-size: 10px;">私服</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.csdn.net/message0203">我的博客园</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">擅长领域大数据分析、网络爬虫、搜索引擎、高并发网络架构。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">JA</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/my.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">JA</h1>
			</hgroup>
			
			<p class="header-subtitle">志在，愿即在！</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/mavenbook">maven使用指南</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/ibofine/" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="/weibo.com" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
						<a class="mail" target="_blank" href="/message0203@sina.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-chapter8/chapter8" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/12/chapter8/chapter8/" class="article-date">
  	<time datetime="2015-11-13T05:05:10.058Z" itemprop="datePublished">2015-11-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      第8章 私服nexus
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/eclipse/">eclipse</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven/">maven</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nexus/">nexus</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/私服/">私服</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="第8章_私服nexus">第8章 私服nexus</h1><blockquote>
<p>本章详细介绍了nexus的安装过程，设置maven从私服下载构件，以及发布构件至nexus。</p>
</blockquote>
<h2 id="8-1_什么是nexus">8.1 什么是nexus</h2><p>nexus是一个web版的仓库管理软件</p>
<h2 id="8-2_nexus安装">8.2 nexus安装</h2><p>nexus安装非常简单。<br>下载地址：<a href="http://www.sonatype.org/nexus/go" target="_blank" rel="external">http://www.sonatype.org/nexus/go</a></p>
<p>本文以Linux环境为例，安装nexus：</p>
<ol>
<li>首先在/usr/local下建nexus目录</li>
<li>将下载的zip包解压，将其中的nexus-2.11.4-01解压至nexus如图：</li>
</ol>
<p><img src="https://img.alicdn.com/imgextra/i3/653726111/TB2wqjlhXXXXXbiXpXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<ol>
<li>进入bin目录，将nexus设置为可执行权限：</li>
</ol>
<p><code>cd bin</code></p>
<p><code>chmod +x nexus</code></p>
<p><img src="https://img.alicdn.com/imgextra/i3/653726111/TB2jzjphXXXXXaWXpXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<a id="more"></a>
<ol>
<li><p>设置root可执行nexus<br>默认的nexus是不让root用户直接启动的，会报出如下错误</p>
<p>  <code>WARNING - NOT RECOMMENDED TO RUN AS ROOT</code><br>  <code>If you insist running as root, then set the environment variable RUN_AS_USER=root before running this script.</code></p>
<p><img src="https://img.alicdn.com/imgextra/i2/653726111/TB2LrvLhXXXXXX1XXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
</li>
</ol>
<p>需要设置root执行权限<br><code>export set RUN_AS_USER=root</code><br>此语句仅临时设置root变量，重启linux后会无效，如需持久设置，需要修改环境变量，见以下步骤。</p>
<ol>
<li>此时执行<code>./nexus start</code>即可启动nexus。 </li>
</ol>
<p><img src="https://img.alicdn.com/imgextra/i4/653726111/TB2p5_zhXXXXXbWXXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<ol>
<li>停止nexus</li>
</ol>
<p><code>./nexus stop</code></p>
<p><img src="https://img.alicdn.com/imgextra/i3/653726111/TB23DTMhXXXXXXyXXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<ol>
<li>配置环境变量，设置开机启动</li>
</ol>
<ul>
<li>设置环境变量：</li>
</ul>
<p><code>vim /etc/profile</code></p>
<p>在最后一行添加<code>export set RUN_AS_USER=root</code></p>
<p><img src="https://img.alicdn.com/imgextra/i2/653726111/TB2vnbGhXXXXXacXXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<ul>
<li>设置开机启动<br>进入到配置目录：</li>
</ul>
<p><code>cd /etc/init.d</code></p>
<p>复制脚本<code>cp /usr/local/nexus/bin/nexus nexus</code></p>
<p>添加系统服务：<code>chkconfig --add nexus</code></p>
<p>设置启动级别为345：<code>chkconfig --levels 345 nexus on</code></p>
<p>查看是否添加成功：<code>chkconfig --list|grep nexus</code>，如图</p>
<p><img src="https://img.alicdn.com/imgextra/i4/653726111/TB2cxjHhXXXXXaHXXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<ul>
<li>修改脚本</li>
</ul>
<p><code>vim /etc/init.d/nexus</code></p>
<p>第一行添加：<br><code>RUN_AS_USER=&quot;root&quot;</code></p>
<p>然后，将<code>NEXUS_HOME=&quot;..&quot;</code>修改为<code>NEXUS_HOME=&quot;/usr/local/nexus&quot;</code></p>
<p>如图：<img src="https://img.alicdn.com/imgextra/i1/653726111/TB2CvHBhXXXXXchXXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<ul>
<li>重启Linux<br><code>reboot</code></li>
<li>访问地址：<code>http://&lt;LinuxIP&gt;:8081/nexus/#welcome</code></li>
</ul>
<p><strong>注意：重启Linux需要一段时间，不断刷新此地址即可。</strong></p>
<pre><code>查看nexus是否启动，<span class="code">`ps –ef|grep nexus`</span>。


![<span class="link_label">Alt text</span>](<span class="link_url">https://img.alicdn.com/imgextra/i2/653726111/TB2Kpa_hXXXXXXRXFXXXXXXXXXX_!!653726111.png</span>)
</code></pre><h2 id="8-3_nexus仓库设置">8.3 nexus仓库设置</h2><h3 id="8-3-1_登录系统，修改密码">8.3.1 登录系统，修改密码</h3><p>nexus默认的管理员密码是admin/admin123，为了安全起见，第一件事就是上来修改管理员密码。</p>
<p><img src="https://img.alicdn.com/imgextra/i3/653726111/TB23S2EhXXXXXa2XXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<p><img src="https://img.alicdn.com/imgextra/i2/653726111/TB2KmYahXXXXXXlXFXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<p><img src="https://img.alicdn.com/imgextra/i2/653726111/TB2C0bPhXXXXXXaXXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<p><img src="https://img.alicdn.com/imgextra/i2/653726111/TB2S_YahXXXXXXAXFXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<h3 id="8-3-2_nexus内置仓库介绍">8.3.2 nexus内置仓库介绍</h3><h4 id="1、_仓库类型介绍">1、    仓库类型介绍</h4><p><img src="https://img.alicdn.com/imgextra/i3/653726111/TB2.abzhXXXXXctXXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<table>
<thead>
<tr>
<th style="text-align:right">仓库类型</th>
<th style="text-align:left">介绍</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">group</td>
<td style="text-align:left">仓库组</td>
</tr>
<tr>
<td style="text-align:right">hosted</td>
<td style="text-align:left">宿主仓库</td>
</tr>
<tr>
<td style="text-align:right">proxy</td>
<td style="text-align:left">代理仓库</td>
</tr>
<tr>
<td style="text-align:right">virtual</td>
<td style="text-align:left">虚拟仓库</td>
</tr>
</tbody>
</table>
<h4 id="2、_仓库介绍">2、    仓库介绍</h4><table>
<thead>
<tr>
<th style="text-align:right">仓库</th>
<th style="text-align:left">介绍</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">3rd party</td>
<td style="text-align:left">这是一个策略为Releases的宿主仓库，用来部署无法从公共仓库获得的第三方发布版本构件</td>
</tr>
<tr>
<td style="text-align:right">Apache Snapshots</td>
<td style="text-align:left">这是一个策略为Snapshots的代理仓库，用来代理ApacheMaven仓库的快照版本构件</td>
</tr>
<tr>
<td style="text-align:right">Central</td>
<td style="text-align:left">这是一个策略为Releases的代理仓库，用来代理maven中央仓库中发布的版本构件</td>
</tr>
<tr>
<td style="text-align:right">Central M1 shadow</td>
<td style="text-align:left">这是一个策略为Releases的虚拟仓库，用来提供中央仓库中M1格式的发布版本的构件</td>
</tr>
<tr>
<td style="text-align:right">Codehaus Snapshots</td>
<td style="text-align:left">这是一个策略为Snapshots的代理仓库，用来代理Codehaus Snapshots仓库的快照版本构件的仓库</td>
</tr>
<tr>
<td style="text-align:right">Releases</td>
<td style="text-align:left">这是一个策略为Releases的宿主仓库，用来部署管理内部的发布版本构件</td>
</tr>
<tr>
<td style="text-align:right">Snapshots</td>
<td style="text-align:left">这是一个策略为Snapshots的宿主仓库，用来部署管理内部的快照版本构件</td>
</tr>
</tbody>
</table>
<h3 id="8-3-3_索引">8.3.3 索引</h3><ul>
<li><p><strong>开启远程索引</strong><br>一个新搭建的nexus，是一个空的仓库，nexus默认是关闭远程索引下载，打开步骤如图：</p>
<p>  <strong>注意：3个proxy类型的远程索引都需要打开</strong></p>
<p>  <img src="https://img.alicdn.com/imgextra/i2/653726111/TB2h3TahXXXXXX4XFXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<p>  然后在3个proxy类型的仓库上，点击右键，Repair Index，nexus就会去下载远程的索引文件。</p>
<p>  <img src="https://img.alicdn.com/imgextra/i1/653726111/TB2MNbChXXXXXblXXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<p>  测试</p>
<p>  在Browse Remote 中搜索任意jar</p>
<p>  <img src="https://img.alicdn.com/imgextra/i4/653726111/TB2gKLEhXXXXXa6XXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
</li>
</ul>
<h3 id="8-3-4_创建宿主仓库">8.3.4 创建宿主仓库</h3><p><img src="https://img.alicdn.com/imgextra/i2/653726111/TB26g2DhXXXXXbFXXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<p><img src="https://img.alicdn.com/imgextra/i2/653726111/TB2g3PxhXXXXXcCXXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<h3 id="8-3-5_仓库组设置">8.3.5 仓库组设置</h3><ul>
<li>什么是仓库组？</li>
</ul>
<p>仓库组是将多个仓库聚合成一个仓库地址，为maven提供服务。maven配置中，只需要配置仓库组的链接，即可同时得到多个仓库的构件。<br>仓库组中仓库的顺序决定了仓库组遍历其所含仓库的次序，所以应该将常用的仓库放在前面。</p>
<pre><code>仓库组设置很简单：
点击<span class="operator">type</span>为group类型的仓库，configuration标签页中Ordered <span class="keyword">Group</span> <span class="title">Repositories</span>为当前组包含仓库，available repositories为可继续添加的仓库。
</code></pre><p><img src="https://img.alicdn.com/imgextra/i3/653726111/TB2mYzAhXXXXXbKXXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<h2 id="8-4_配置maven从私服下载构件">8.4 配置maven从私服下载构件</h2><p>前面安装了nexus，目的就是让开发人员的maven链接私服下载构件。</p>
<p>修改maven配置文件<strong>setting.xml</strong></p>
<p>找到profiles标签，设置代码：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">profiles</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">profile</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="title">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">repository</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="title">id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">name</span>&gt;</span>crop-nexus<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">url</span>&gt;</span>http://你的NexusIP:8081/nexus/content/groups/public/<span class="tag">&lt;/<span class="title">url</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">releases</span>&gt;</span></span><br><span class="line">				<span class="comment">&lt;!-- true表示开启仓库发布版本下载，false表示禁止 --&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="title">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="title">enabled</span>&gt;</span></span><br><span class="line">				</span><br><span class="line">		<span class="tag">&lt;/<span class="title">releases</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">snapshots</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- true表示开启仓库快照版本下载，false表示禁止 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="title">enabled</span>&gt;</span></span><br><span class="line">			</span><br><span class="line">		<span class="tag">&lt;/<span class="title">snapshots</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="title">repository</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="title">repositories</span>&gt;</span></span><br><span class="line">			</span><br><span class="line">	<span class="tag">&lt;<span class="title">pluginRepositories</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">pluginRepository</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="title">id</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">url</span>&gt;</span> http://你的NexusIP:8081/nexus/content/groups/public/<span class="tag">&lt;/<span class="title">url</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">releases</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="title">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="title">enabled</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="title">releases</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">snapshots</span>&gt;</span></span><br><span class="line">				<span class="comment">&lt;!-- 禁止快照版本，防止不稳定的插件影响项目构建 --&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="title">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="title">enabled</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="title">snapshots</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">pluginRepository</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">pluginRepositories</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="title">profile</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">profiles</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 激活nexus私服 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="title">activeProfiles</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="title">activeProfile</span>&gt;</span>nexus<span class="tag">&lt;/<span class="title">activeProfile</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">activeProfiles</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这样配置，maven就可以从私服下载构件了，但是会有个问题，他还会时不时的请求中央仓库，如果想完全让maven访问nexus私服，需要设置镜像mirrors来支持。</p>
<h2 id="8-5_maven的镜像配置">8.5 maven的镜像配置</h2><p>maven配置镜像后，所有的构件都只会从镜像服务器下载。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">mirrors</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">mirror</span>&gt;</span></span><br><span class="line">	     <span class="tag">&lt;<span class="title">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="title">id</span>&gt;</span></span><br><span class="line">	     <span class="tag">&lt;<span class="title">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="title">mirrorOf</span>&gt;</span></span><br><span class="line">	     <span class="tag">&lt;<span class="title">name</span>&gt;</span>crop-nexus<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">	     <span class="tag">&lt;<span class="title">url</span>&gt;</span>http://你的nexusIP:8081/nexus/content/groups/public/<span class="tag">&lt;/<span class="title">url</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="title">mirror</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="8-6_发布构件至nexus">8.6 发布构件至nexus</h2><h3 id="8-6-1_配置distributionManagement">8.6.1 配置distributionManagement</h3><p>发布仓库一般分为Releases版和snapshot版，所以要配置2个仓库地址<br>注意：这个是在项目的<strong>pom.xml</strong>中配置的</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 发布构件至私服nexus --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">distributionManagement</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">repository</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">id</span>&gt;</span>nexus-releases<span class="tag">&lt;/<span class="title">id</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">name</span>&gt;</span>corp nexus-releases<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">url</span>&gt;</span>http://你的nexusIP:8081/nexus/content/repositories/releases/<span class="tag">&lt;/<span class="title">url</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">repository</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">snapshotRepository</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">id</span>&gt;</span>nexus-snapshot<span class="tag">&lt;/<span class="title">id</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">name</span>&gt;</span>corp nexus-snapshot<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">url</span>&gt;</span>http://你的nexusIP:8081/nexus/content/repositories/snapshots/<span class="tag">&lt;/<span class="title">url</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">snapshotRepository</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="8-6-2_设置用户">8.6.2 设置用户</h3><p>配置好pom.xml后，需要指定发布用户，在<strong>setting.xml</strong>中设置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">servers</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">	<span class="comment">&lt;!-- 发布Releases版的账号，ID要与distributionManagement中的Releases ID一致 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">server</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">id</span>&gt;</span>nexus-releases<span class="tag">&lt;/<span class="title">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password</span>&gt;</span>******<span class="tag">&lt;/<span class="title">password</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">server</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 发布snapshot版的账号，ID要与distributionManagement中的snapshot ID一致 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">server</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">id</span>&gt;</span>nexus-snapshot<span class="tag">&lt;/<span class="title">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="title">username</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">password</span>&gt;</span>******<span class="tag">&lt;/<span class="title">password</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">server</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"> <span class="tag">&lt;/<span class="title">servers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>设置完成，使用命令发布至nexus</p>
<p><code>mvn deploy</code></p>
<p><img src="https://img.alicdn.com/imgextra/i4/653726111/TB2uq_vhXXXXXXeXpXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>
<p>在nexus中查看</p>
<p><img src="https://img.alicdn.com/imgextra/i1/653726111/TB2C9bxhXXXXXctXXXXXXXXXXXX_!!653726111.png" alt="Alt text"></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/11/12/chapter9/chapter9/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          第9章 maven的插件和生命周期
        
      </div>
    </a>
  
  
    <a href="/2015/11/12/chapter7/chapter7/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">第7章 仓库</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>





  <section id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="post-chapter8/chapter8" data-title="第8章 私服nexus" data-url="http://www.ibofine.com/2015/11/12/chapter8/chapter8/"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'ibofine'};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
      </script>
    <!-- 多说公共JS代码 end -->
  </section>
  
</div>
      <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 JA
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a>
		<span id="busuanzi_container_site_pv">
   			 本站总访问量<span id="busuanzi_value_site_pv"></span>次
		</span>
		<span id="busuanzi_container_site_uv">
  			本站访客数<span id="busuanzi_value_site_uv"></span>人
		</span> 
      	</div>
    </div>
  </div>
</footer>

    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>